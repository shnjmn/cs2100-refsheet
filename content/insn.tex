
\newcommand{\rd}{R\textsubscript{D}}
\newcommand{\rt}{R\textsubscript{T}}
\newcommand{\rs}{R\textsubscript{S}}
\newcommand{\imm}[1]{C\textsubscript{#1}}

\newcommand{\mipss}{\textsuperscript{\textpm}}
\newcommand{\mipsu}{\textsuperscript{\textzerooldstyle}}

% \newcommand{\mipsaddr}{C\textsubscript{26}\textsuperscript{$\varnothing$}}
% \newcommand{\mipsshift}{C\textsubscript{5}\textsuperscript{$\varnothing$}}
\newcommand{\floatright}{\newline\phantom{.}\hfill}
\newcommand{\insntab}{\tabto{3em}}

\newcommand{\opsl}{<{}<}
\newcommand{\opsr}{>{}>}
\newcommand{\opxor}{\ensuremath{\oplus}}

\newenvironment{mipsinsn}[3]{
	\begin{minipage}[c]{10em}
		\texttt{#1} \insntab \texttt{#2}
	\end{minipage}
	\hfill
	\begin{minipage}[c]{0.28\linewidth}
		\footnotesize #3
	\end{minipage}
	\hfill
	\begin{minipage}[c]{0.42\linewidth}
		\begin{bytefield}[boxformatting=\footnotesize\ttfamily\centering,bitwidth=0.03125\linewidth,bitheight=1.5em]{32}
			}{
		\end{bytefield}
	\end{minipage}
}

\begin{mipsinsn}{ADD}{\rd{}, \rs{}, \rt{}}{\rd{} = \rs{} + \rt{}}
	\bitheader[endianness=big]{0,5,6,10,11,15,16,20,21,25,26,31} \\
	\bitbox{6}{000000} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{5}{\rd} &
	\bitbox{5}{00000} &
	\bitbox{6}{100000}
\end{mipsinsn}

\begin{mipsinsn}{ADDI}{\rt{}, \rs{}, \imm{16}}{\rt{} = \rs{} + \imm{16}\mipss{}}
	\bitbox{6}{001000} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{16}{\imm{16}}
\end{mipsinsn}

\begin{mipsinsn}{SUB}{\rd{}, \rs{}, \rt{}}{\rd{} = \rs{} - \rt{}}
	\bitbox{6}{000000} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{5}{\rd} &
	\bitbox{5}{00000} &
	\bitbox{6}{100010}
\end{mipsinsn}

\begin{mipsinsn}{LUI}{\rt{}, \imm{16}}{\rt{} = \imm{16} \opsl{} 16}
	\bitbox{6}{001111} &
	\bitbox{5}{00000} &
	\bitbox{5}{\rt} &
	\bitbox{16}{\imm{16}}
\end{mipsinsn}

\begin{mipsinsn}{SLL}{\rd{}, \rt{}, \imm{5}}{\rd{} = \rt{} \opsl{} \imm{5}\mipsu{}}
	\bitbox{6}{000000} &
	\bitbox{5}{00000} &
	\bitbox{5}{\rt} &
	\bitbox{5}{\rd} &
	\bitbox{5}{\imm{5}} &
	\bitbox{6}{000000}
\end{mipsinsn}

\begin{mipsinsn}{SRL}{\rd{}, \rt{}, \imm{5}}{\rd{} = \rt{}\mipsu{} \opsr{} \imm{5}\mipsu{}}
	\bitbox{6}{000000} &
	\bitbox{5}{00000} &
	\bitbox{5}{\rt} &
	\bitbox{5}{\rd} &
	\bitbox{5}{\imm{5}} &
	\bitbox{6}{000010}
\end{mipsinsn}

\begin{mipsinsn}{AND}{\rd{}, \rs{}, \rt{}}{\rd{} = \rs{} \& \rt{}}
	\bitbox{6}{000000} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{5}{\rd} &
	\bitbox{5}{00000} &
	\bitbox{6}{100100}
\end{mipsinsn}

\begin{mipsinsn}{ANDI}{\rt{}, \rs{}, \imm{16}}{\rt{} = \rs{} \& \imm{16}\mipsu{}}
	\bitbox{6}{001100} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{16}{\imm{16}}
\end{mipsinsn}

\begin{mipsinsn}{OR}{\rd{}, \rs{}, \rt{}}{\rd{} = \rs{} | \rt{}}
	\bitbox{6}{000000} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{5}{\rd} &
	\bitbox{5}{00000} &
	\bitbox{6}{100101}
\end{mipsinsn}

\begin{mipsinsn}{ORI}{\rt{}, \rs{}, \imm{16}}{\rt{} = \rs{} | \imm{16}\mipsu{}}
	\bitbox{6}{001101} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{16}{\imm{16}}
\end{mipsinsn}

\begin{mipsinsn}{NOR}{\rd{}, \rs{}, \rt{}}{\rd{} = \textasciitilde(\rs{} | \rt{})}
	\bitbox{6}{000000} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{5}{\rd} &
	\bitbox{5}{00000} &
	\bitbox{6}{100111}
\end{mipsinsn}

\begin{mipsinsn}{XOR}{\rd{}, \rs{}, \rt{}}{\rd{} = \rs{} \opxor{} \rt{}}
	\bitbox{6}{000000} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{5}{\rd} &
	\bitbox{5}{00000} &
	\bitbox{6}{100110}
\end{mipsinsn}

\begin{mipsinsn}{XORI}{\rt{}, \rs{}, \imm{16}}{\rt{} = \rs{} \opxor{} \imm{16}\mipsu{}}
	\bitbox{6}{001110} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{16}{\imm{16}}
\end{mipsinsn}

\begin{mipsinsn}{SLT}{\rd{}, \rs{}, \rt{}}{\rd{} = (\rs\mipss{} \textless{} \rt\mipss{}) ? 1 : 0}
	\bitbox{6}{000000} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{5}{\rd} &
	\bitbox{5}{00000} &
	\bitbox{6}{101010}
\end{mipsinsn}

\begin{mipsinsn}{SLTI}{\rt{}, \rs{}, \imm{16}}{\rt{} = (\rs\mipss{} \textless{} \imm{16}\mipss{}) ? 1 : 0}
	\bitbox{6}{001010} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{16}{\imm{16}}
\end{mipsinsn}

\begin{mipsinsn}{BEQ}{\rs{}, \rt{}, \imm{16}}{
		\textsc{if} \rs{} == \rt{}, PC += \imm{16}\mipss{} \opsl{} 2
	}
	\bitbox{6}{000100} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{16}{\imm{16}}
\end{mipsinsn}

\begin{mipsinsn}{BNE}{\rs{}, \rt{}, \imm{16}}{
		\textsc{if} \rs{} != \rt{}, PC += \imm{16}\mipss{} \opsl{} 2
	}
	\bitbox{6}{000101} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{16}{\imm{16}}
\end{mipsinsn}

\begin{mipsinsn}{J}{\imm{26}}{
		PC = PC\textsubscript{31:28} | (\imm{26} \opsl{} 2)
	}
	\bitbox{6}{000010} &
	\bitbox{26}{\imm{26}}
\end{mipsinsn}

\begin{mipsinsn}{LW}{\rt{}, \imm{16}(\rs{})}{\rt{} = Mem\textsubscript{32}(\rs{} + \imm{16}\mipss{})}
	\bitbox{6}{100011} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{16}{\imm{16}}
\end{mipsinsn}

\begin{mipsinsn}{SW}{\rt{}, \imm{16}(\rs{})}{Mem\textsubscript{32}(\rs{} + \imm{16}\mipss{}) = \rt{}}
	\bitbox{6}{101011} &
	\bitbox{5}{\rs} &
	\bitbox{5}{\rt} &
	\bitbox{16}{\imm{16}}
\end{mipsinsn}

\begin{itemize}
	\footnotesize
	\item[\textpm] signed operator or sign-extended
	\item[\textzerooldstyle] unsigned operator or zero-extended
\end{itemize}
